
question：
如何做到精确监控？ 流量不容易看出问题 怎么办， 如何能精确锁定到失控的服务器？

zlogin 
salt  
zabbix；
termrec       /usr/local/bin/termrec -a /var/log/oplog/vince-201512090935.ttyrec  在记录我控制台的操作； 

fabric    类似os模块呢！
	{from fabric.api import run
		def host_type():
    run('uname -s')
	}
	
$ fab -H localhost,linuxbox host_type




init_azure.py 解析； 
.put : copy文件呗
.sudo : run command 呗
	.change dns file
	.change yum
	.system config
	.crontab
	.update rpm
	.ncsd ? atop , zamplus-passreq ,/etc/serial 硬件信息； zabbix ，gid，cron ； profile ；
	
hostname = HOST_DICT.get(env.host_string)
 83     if  hostname:
 84         sudo('echo "%s" > /etc/hostname'%hostname)
 85         sudo('hostname %s'%hostname)
-----------


 思考 一下 自动化操作 ；
自动化的操作；

所有步骤均在 
ansible 循环处理 ；{sort是否可以处理？}

ansible 貌似可以解决 输入sudo 密码的问题 ；
 
替换操作呢！ 文件的精确替换；这一部 ，用sed 也可以解决； 

等待 stop，start操作完成， service restart && grep 日志关键字 && curl 端口 && echo $？

不适合自动运行下一台呢，那就指定一台，获取命令参数 
 
执行下一台 ；

关键日志 出现； 
关键字一
[INIT_ROBOTS] zamplus robots 3.0 starting...
关键字二，成功启动；
[INIT_ROBOTS] zamplus robots 3.0 success initialized


执行就不会有太大问题； 
curl 127.0.0.1:13089  

------------------------------
for i in `cat robot`;do ssh i 'grep -q "startree,lr" /usr/local/robots/data/model_common/model_process.json && echo $?';done




---------------------------------------

--------


Zambda 体系： 【zabbix中查询到的】
Zampda3
zampda3_AUX
Zampda3_Banker
Zampda3_Billing
Zampda3_Bridge
zampda3_cookiemappng
Zampda3_DB
zampda3_DEP
Zampda3_DisplayRule
zampda3_DMP
Zampda3_Docker
zampda3_DS
Zampda3_FE  
	-----  广告通，流量接入，优酷移动流量接入， 
	sql建表 平台竞价每日日报表，平台消耗每日报表，平台广告主每日报表（平台，反作弊后展示数，流量展示）； 
	添加解析：dreport.zamplus.local 172.22.49.1 端口9191.
	升级deb 包； 查包的相关文件 ？ 
	三台服务器cron执行php ，连接数据库； 
		定义了连接哪台mysql数据库，php语言查询数据，获取数据 get daily bidding report，advertise report，
	zamplus-report  -- JAVA 
	线上FE只能看到广点通的移动联盟banner,插屏，开屏，wifi定向等基本功能设置保存正常。优酷的心中前、中、后贴，视频暂停，勾选保存正常。
	api的那个包类似一个php程序，许多更新db的sql脚本
	billing 这个暂时无法判断 用途，很多xml文件，启动的时候 显示是个nginx 呢！ （accuen平台计费）
	fe30  ； php ―― js ？？？？
	
Zampda3_Frequency
zampda3_goodman
Zampda3_HC
zampda3_ID
zampda3_KF
Zampda3_Logcollector
Zampda3_MC
Zampda3_MT
Zampda3_Render
Zampda3_Robots    ---  类似广告生成？ 
zampda3_TEST
zampda3_TRK
Zampda3_UC

------------------

-----------------周报
测试通过splunk添加转发器日志功能；
指定splunk日志导入计划，尝试合并ZAMP tracking data日志；
尝试解决nginx-php-fpm源码包的依赖性关系问题；
上线goodman  OPTSERVICE-4422 
上线robots；OPTSERVICE-4431
上线megatron-sserver OPTSERVICE-4436

----------------------

Updated python per OPTSERVICE-4443； 
Updated robots per OPTSERVICE-4444；OPTSERVICE-4453
Added nginx proxy config per OPTSERVICE-4448	，OPTSERVICE-4447
Updated Megatron per jira OPTSERVICE-4445，OPTSERVICE-4480，OPTSERVICE-4479
检查磁盘空间问题，扩展逻辑转，清理多余日志；将漏掉的log补充到logrotate；
检查splunk测试错误，根限制问题，流量限制问题，更改测试方案；


----------------------
熟悉ansible配置，rpm-build配置，zabbix配置； 
配置Neon Cluster部分服务器 的ansible功能，saltstack key没添加成功问题；
在Azure hadoop cluster部署Zabbix基础监控 OPTSERVICE-4491；
初始化 ip:10.66.66.53-10.66.66.55  的centOS 环境；mount disk；
 
聚效（MAX_MOB）rtb 域名上线 Jira OPTSERVICE-4508.
Megatron上线，
	OPTSERVICE-4512 
	OPTSERVICE-4526 
	OPTSERVICE-4543
Goodman，data-update上线，OPTSERVICE-4513 
Zampda3.0 FE 上线； OPTSERVICE-4524 
zamplus_report 上线 OPTSERVICE-4555



------------------------
1.Added grafana monitor for kafka of NeonCluste per HADOOP-217	.
2.Checked why Neon zabbix monitor couldn't show mem graph.
3.Adjusted the CentOS init scripts .   
4.Created 3 Azure Servers ,added disks for DMP group; 
5.Created 3 Azure Servers for zampda group per OPTSERVICE-4585 .
6.Created zampbeat server per  OPTSERVICE-4620.
7.开发服务器10.66.70.4重装系统 per OPTSERVICE-4642 .

8.Server poi http update per OPTSERVICE-4582.
9.Render updated per OPTSERVICE-4626.
10.zamplus_report_1.1.3 update per OPTSERVICE-4638 
11.Megatron updated per 
	OPTSERVICE-4598 ;
	OPTSERVICE-4627 .
	
