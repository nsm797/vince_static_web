#### Setup my account， seems like Under my acount it also can runs； 
vince@TS-OP03:~$ sudo salt -G "ipv4:10.66.66.90" state.sls users.vince

sudo salt -G "ipv4:10.66.66.37" state.sls users.vince
sudo salt -G "ipv4:10.66.66.21" state.sls users.jerry
sudo salt -G "ipv4:221.228.208.56" state.sls users.wangkai


##### For setting up other account . Must use "Space" instead of "Tab" ，Salt can't know tab ；
cd /srv/salt/users/;
cp any_users.sls new_users.sls
vi new_users.sls; # Change the new name .

cd ./files/sshkey
ssh-keygen;         ### Input the new account name .
mv new_users new_user.pem
mv new_users.pub new_users.pem.pub

salt -G "ipv4:221.228.208.30" state.sls users.new_user

send the key to the user via chat ;



#### Edit zampread via zlogin . impressing ! 
question1 ： 
	zlogin 到 zampread ；zampuser ； 貌似可以控制 sudo 时间 ； 果然有个 SUDOTIME；
	login with domain account ，vincent；  click "privilege" ,check the key account ,edit the time .

Steps:
	1. Added git (can't find git domain; can't ping git; can't access sso[test] ,SSO ? )
		[root@CPIC-DMP11 local]# route add -net 10.8.8.0/24 gw 0.0.0.0
			SIOCADDRT: Invalid argument
		[root@CPIC-DMP11 local]# route add -net 10.8.8.0/24 gw 10.66.66.1
	2. Added an nginx website ,setup php & nginx . (fixed php config problem)
  3. Added web root , set zampread own via zlogin (web: WOW, the way is impressing).
	4. Added host record in file. fixed step 2 . 
	... to be continued .
	 
-------------------------------------------------------
#### Update DNS 
DNS 172.22.40.250 

10.66.66.29  AZ-DNS01
10.66.66.33  AZ-DNS02

Add your record manually ### Geee ....
bind9 reload 
-------------------------------------------------------
#### Update rpm ； 
http://192.168.1.201:8877/deploy/admin/   tomtom

click admin 
search keyword （the rpm）
locate the version in jira （rpm），click it ；

click “release to unstbale repro”； 

"go to admin ****"; 

click “Sync Package” ;  

-login the server need to update rpm : 

# apt-get update  

# dpkg -l | grep zamplus
ii  zamplus-billing-server            1.5.1125..1000                        zampabs billing server(selfmedia)
- "ii" means it's ok , install the version we need.  
# apt-get install zamplus-billing-server
- Checking again . 

# dpkg -l | grep zamplus
ii  zamplus-billing-server            1.5.1207.1000                         zampabs billing server(media factor,accuen)

- Restart service ；
# /etc/init.d/zamplus-billing-server restart
/usr/local/billing-server/bin/billing-server is stopping (pid=48136). done.
Stopping nginx: nginx.
/usr/local/billing-server/bin/billing-server is starting... ok (pid=28341
28446).

Starting nginx: nginx.
-- Some time get out zambie process.   
# ps -ef |grep billing
root     28341     1 99 16:32 ?        00:11:48 /usr/local/billing-server/bin/billing-server --config /usr/local/billing-server/conf/billing.conf --daemon
root     28446     1  2 16:32 ?        00:00:11 /usr/local/billing-server/bin/billing-server --config /usr/local/billing-server/conf/billing.conf --daemon

Then we need to restart again . 
# /etc/init.d/zamplus-billing-server restart

Until the process is normal .
# ps -ef |grep billing
root     31040     1 99 16:41 ?        00:00:08 /usr/local/billing-server/bin/billing-server --config /usr/local/billing-server/conf/billing.conf --daemon

----------------------Deployments on Robots servers ;
http://grafana.dev.zamplus.com:8813/#/dashboard/db/30-robots
sudo /etc/init.d/zamplus-robots restart


    1  history 
    2  cd /usr/local/robots/data/model_common/
    3  ls
    4  cat model_process.json 
    5  sudo /etc/init.d/zamplus-robots restart 
    6  curl 127.0.0.1:13089
    7  history 


    4  ls /var/crash/
    5  ll -t /var/crash/_usr_local_robots_bin_general_bidding 
    6  date
    7  tail -f /var/log/robots/log/service.all.log
    8  curl 127.0.0.1:13089
    9  netstat -an |grep 13089
   10  tail -f /var/log/robots/log/service.all.log
   
   tail -f /var/log/robots/log/service.all.log |grep -P '(ERROR|WARN|INIT)'

vxp

   tail -f /var/log/robots/log/service.all.log |grep "success initialized" 



--------------------------------------------------
Initialize Microsoft cloud servers : Virtual Servers . 

{
### Edit azure.info , replace with following ones.
10.66.66.29  AZ-DNS01
10.66.66.33  AZ-DNS02

### The script init_azure.py include following message. some time need to replace .
User:azureuser
Pwd:AdaG(sVa4A3

### Run it as sudo ? yeah ,I think . 
fab -f init_azure.py  init_salt
}

PostThinging . 
	像在K机器呢！ 把我们的服务器 配置，环境变量 自动 弄入新服务器：
	引用了azure.info (IP VS hostname)
	python脚本； 定义了account & pd ，maybe need to change it ； 
	
执行：
修改azure.info 为你需要的信息； 
按需求编辑 脚本 中的 account & pd ；
执行：
fab -f init_azure.py  init_salt

扩展：
还有可能来做其他云服务器的脚本；

深入；
	可以查看init_azure.py如何编写， 如何引用，查看常用模块； 如何引用salt ； 

困难：
	查询模块吧，有可能 知道如何工作 却自己写不出来；    
	

